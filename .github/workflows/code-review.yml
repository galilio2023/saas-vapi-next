name: "Gemini AI Reviewer"

on:
  pull_request:
    types: [opened, synchronize]

permissions:
  contents: read
  pull-requests: write

jobs:
  review:
    runs-on: ubuntu-latest
    steps:
      - name: "Run AI Review"
        uses: petarzarkov/gemini-code-review-action@latest
        with:
          gemini_api_key: ${{ secrets.GEMINI_API_KEY }}
          model: "gemini-1.5-flash" # Best for Free Tier
          custom_prompt: |
            You are a Senior Full-Stack Engineer reviewing "Converso".
            Tech Stack: Next.js 16, Tailwind v4, Supabase, Vapi.ai.
            
            Please review for:
            1. **Tailwind v4**: Ensure @theme variables are used and font fallbacks are present.
            2. **Logic**: Check for proper 'use client' vs 'use server' placement.
            3. **Vapi**: Check for clean handling of voice streams.
            
            Keep comments short and actionable.